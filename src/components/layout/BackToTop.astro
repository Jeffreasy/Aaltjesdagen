---
/**
 * BackToTop.astro
 *
 * Een "back to top" knop die verschijnt wanneer de gebruiker naar beneden scrolt.
 * Gebruikt Alpine.js voor scroll-detectie en smooth scrolling.
 */
---

<div
  x-data="{ 
    show: false,
    init() {
      this.checkScroll();
    },
    checkScroll() {
      this.show = window.pageYOffset > 400;
    },
    scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  }"
  @scroll.window.throttle.100ms="checkScroll()"
  class="fixed bottom-6 right-6 pointer-events-none"
  style="z-index: var(--z-elevated);"
  :class="{ 'pointer-events-auto': show }"
>
  <button
    x-show="show"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0 translate-y-8 scale-75"
    x-transition:enter-end="opacity-100 translate-y-0 scale-100"
    x-transition:leave="transition ease-in duration-300"
    x-transition:leave-start="opacity-100 translate-y-0 scale-100"
    x-transition:leave-end="opacity-0 translate-y-8 scale-75"
    @click="scrollToTop()"
    class="group flex items-center justify-center w-12 h-12 rounded-full bg-primary text-white shadow-lg shadow-primary/30 hover:shadow-xl hover:shadow-primary/40 hover:-translate-y-1 active:scale-95 transition-all duration-300 backdrop-blur-sm"
    aria-label="Terug naar boven"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="w-6 h-6 transform group-hover:-translate-y-0.5 transition-transform duration-300"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="2.5"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
    </svg>

    <!-- Pulse effect ring for visual interest -->
    <span
      class="absolute inset-0 rounded-full bg-white/20 scale-0 group-hover:scale-110 opacity-0 group-hover:opacity-100 transition-all duration-500"
    ></span>
  </button>
</div>
