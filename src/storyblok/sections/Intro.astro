---
import { storyblokEditable } from "@storyblok/astro";
import { renderText } from "@laventecare/astro-ui/utils/storyblok";
import { storyblokImage } from "@laventecare/astro-ui/utils/storyblok";
import { Image } from "astro:assets";

const { blok } = Astro.props;
const richTextContent = renderText(blok.text);
---

<section
    {...storyblokEditable(blok)}
    class="relative section-spacing overflow-hidden"
>
    {/* Background decoration */}
    <div class="absolute inset-0 pointer-events-none" aria-hidden="true">
        <div class="decorative-orb-primary top-20 left-10"></div>
        <div class="decorative-orb-accent bottom-20 right-10"></div>
    </div>

    <div class="container-custom relative z-10">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
            {/* Kolom 1: Tekst Content */}
            <div class="space-y-8">
                {
                    blok.title && (
                        <h2 class="heading-section !text-[var(--color-accent)] !mb-0">
                            {blok.title}
                        </h2>
                    )
                }

                {
                    blok.Text && (
                        <p class="text-xl md:text-2xl font-medium leading-relaxed text-sub">
                            {blok.Text}
                        </p>
                    )
                }

                {
                    richTextContent && (
                        <div
                            class="prose prose-lg prose-primary max-w-none dark:prose-invert"
                            set:html={richTextContent}
                        />
                    )
                }

                {
                    /* Eerste afbeelding set (afbeelding) - als klein grid of enkele foto */
                }
                {
                    blok.afbeelding && blok.afbeelding.length > 0 && (
                        <div
                            class={`grid gap-4 mt-8 ${blok.afbeelding.length > 1 ? "grid-cols-2" : "grid-cols-1"}`}
                        >
                            {blok.afbeelding.map((img: any) => (
                                <div class="rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300">
                                    <Image
                                        src={storyblokImage(
                                            img.filename,
                                            600,
                                            400,
                                        )}
                                        alt={img.alt || blok.title}
                                        class="w-full h-auto object-cover hover:scale-105 transition-transform duration-500"
                                        width={600}
                                        height={400}
                                        loading="lazy"
                                    />
                                </div>
                            ))}
                        </div>
                    )
                }
            </div>

            {/* Kolom 2: Visuals (afbeelding2) - Grotere sfeerbeelden */}
            <div class="lg:sticky lg:top-24">
                {
                    blok.afbeelding2 && blok.afbeelding2.length > 0 && (
                        <div class="grid gap-6">
                            {blok.afbeelding2.map((img: any, index: number) => (
                                <div
                                    class={`rounded-3xl overflow-hidden shadow-2xl ${index % 2 !== 0 ? "ml-8" : "mr-8"} transform hover:-translate-y-2 transition-transform duration-500`}
                                >
                                    <Image
                                        src={storyblokImage(
                                            img.filename,
                                            800,
                                            600,
                                        )}
                                        alt={img.alt || blok.title}
                                        class="w-full h-auto object-cover"
                                        width={800}
                                        height={600}
                                        loading="lazy"
                                    />
                                </div>
                            ))}
                        </div>
                    )
                }
            </div>
        </div>
    </div>
</section>
