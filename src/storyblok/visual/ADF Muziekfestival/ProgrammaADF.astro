---
import { storyblokEditable } from "@storyblok/astro";
import { renderText } from "@aaltjesdagen/ui/utils";
import { storyblokImage } from "@aaltjesdagen/ui/utils";
import { Image } from "astro:assets";

const { blok } = Astro.props;
const richTextContent = renderText(blok.content);
---

<section
    {...storyblokEditable(blok)}
    class="relative section-spacing glass border-y"
>
    <div class="container-custom">
        {/* Header Sectie */}
        <div class="max-w-4xl mx-auto text-center mb-16 space-y-6">
            {
                blok.title && (
                    <h2 class="heading-section !text-accent !mb-0">
                        {blok.title}
                    </h2>
                )
            }
            {
                blok.Text && (
                    <p class="text-lg md:text-xl text-sub leading-relaxed max-w-2xl mx-auto">
                        {blok.Text}
                    </p>
                )
            }
        </div>

        {/* Content Grid */}
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">
            {/* Links: Programma Details (RichText) */}
            <div
                class="lg:col-span-7 card-base hover:shadow-xl hover:border-primary"
            >
                {
                    richTextContent && (
                        <div
                            class="prose prose-lg prose-primary max-w-none dark:prose-invert 
              prose-headings:font-heading prose-headings:text-text-main 
              prose-a:text-primary hover:prose-a:text-accent
              prose-strong:text-text-main"
                            set:html={richTextContent}
                        />
                    )
                }
            </div>

            {/* Rechts: Media Gallery */}
            <div class="lg:col-span-5 space-y-6">
                {
                    blok.afbeelding && blok.afbeelding.length > 0 && (
                        <div class="grid gap-6">
                            {blok.afbeelding.map((img: any) => (
                                <div class="group relative rounded-2xl overflow-hidden shadow-lg aspect-[4/3]">
                                    <Image
                                        src={storyblokImage(
                                            img.filename,
                                            600,
                                            450,
                                        )}
                                        alt={img.alt || blok.title}
                                        class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
                                        width={600}
                                        height={450}
                                        loading="lazy"
                                    />
                                    <div class="absolute inset-0 bg-black/20 group-hover:bg-transparent transition-colors duration-300" />
                                </div>
                            ))}
                        </div>
                    )
                }
            </div>
        </div>
    </div>
</section>
