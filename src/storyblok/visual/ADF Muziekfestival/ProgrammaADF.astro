---
import { storyblokEditable } from "@storyblok/astro";
import { renderRichText } from "@storyblok/astro";

const { blok } = Astro.props;
const richTextContent = blok.content ? renderRichText(blok.content) : "";
---

<section
    {...storyblokEditable(blok)}
    class="relative py-16 md:py-24 bg-[var(--bg-elevated)]/60 backdrop-blur-sm border-y border-[var(--border-secondary)]"
>
    <div class="container-custom">
        {/* Header Sectie */}
        <div class="max-w-4xl mx-auto text-center mb-16 space-y-6">
            {
                blok.title && (
                    <h2 class="text-3xl md:text-5xl font-bold font-heading text-[var(--color-accent)]">
                        {blok.title}
                    </h2>
                )
            }
            {
                blok.Text && (
                    <p class="text-lg md:text-xl text-[var(--text-secondary)] leading-relaxed max-w-2xl mx-auto">
                        {blok.Text}
                    </p>
                )
            }
        </div>

        {/* Content Grid */}
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">
            {/* Links: Programma Details (RichText) */}
            <div
                class="lg:col-span-7 bg-[var(--bg-base)] rounded-3xl p-8 md:p-12 shadow-md border border-[var(--border-primary)]"
            >
                {
                    richTextContent && (
                        <div
                            class="prose prose-lg prose-primary max-w-none dark:prose-invert 
              prose-headings:font-heading prose-headings:text-[var(--text-primary)] 
              prose-a:text-[var(--color-primary)] hover:prose-a:text-[var(--color-secondary)]
              prose-strong:text-[var(--text-primary)]"
                            set:html={richTextContent}
                        />
                    )
                }
            </div>

            {/* Rechts: Media Gallery */}
            <div class="lg:col-span-5 space-y-6">
                {
                    blok.afbeelding && blok.afbeelding.length > 0 && (
                        <div class="grid gap-6">
                            {blok.afbeelding.map((img: any) => (
                                <div class="group relative rounded-2xl overflow-hidden shadow-lg aspect-[4/3]">
                                    <img
                                        src={`${img.filename}/m/600x450/filters:quality(80):format(webp)`}
                                        alt={img.alt || blok.title}
                                        class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
                                    />
                                    <div class="absolute inset-0 bg-black/20 group-hover:bg-transparent transition-colors duration-300" />
                                </div>
                            ))}
                        </div>
                    )
                }
                {/* Fallback als er geen afbeelding is */}
                {
                    (!blok.afbeelding || blok.afbeelding.length === 0) && (
                        <div class="aspect-video bg-[var(--bg-base)] rounded-2xl flex items-center justify-center border-2 border-dashed border-[var(--border-secondary)] text-[var(--text-tertiary)]">
                            Afbeelding placeholder
                        </div>
                    )
                }
            </div>
        </div>
    </div>
</section>
