---
import { storyblokEditable } from '@storyblok/astro'

const { blok } = Astro.props

// Dynamische afhandeling van de tekst uit Storyblok
const fullText = blok.headline || ''
const hasMultipleSentences = fullText.includes('.')

let displayHeadline = fullText
let displayBody = blok.text || ''

// Als er veel tekst in de headline staat en geen aparte body is, splitsen we het voor een professionele look
if (!displayBody && fullText.length > 50 && hasMultipleSentences) {
  const firstDotIndex = fullText.indexOf('.')
  displayHeadline = fullText.substring(0, firstDotIndex + 1)
  displayBody = fullText.substring(firstDotIndex + 1).trim()
}
---

<section {...storyblokEditable(blok)} class="section-spacing px-6 relative overflow-hidden">
  <!-- Decorative circles -->
  <div class="absolute top-20 right-10 w-64 h-64 bg-accent/5 dark:bg-accent/10 rounded-full blur-3xl"></div>
  <div class="absolute bottom-20 left-10 w-96 h-96 bg-primary/5 dark:bg-primary/10 rounded-full blur-3xl"></div>
  
  <div class="max-w-5xl mx-auto text-center relative z-10">
    <div class="inline-flex items-center gap-3 bg-gradient-to-r from-accent/10 to-accent/5 dark:from-accent/20 dark:to-accent/15 px-6 py-2 rounded-full mb-8 border border-accent/20 dark:border-accent/30">
      <span class="relative flex h-2 w-2">
        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-accent opacity-75"></span>
        <span class="relative inline-flex rounded-full h-2 w-2 bg-accent"></span>
      </span>
      <span class="text-accent font-bold text-sm uppercase tracking-wider">Uitgelicht</span>
    </div>
    
    <h2 class="text-3xl md:text-6xl font-black text-accent mb-10 tracking-tight leading-tight drop-shadow-sm">
      {displayHeadline}
    </h2>
    
    {displayBody && (
      <div class="space-y-6">
        <p class="text-lg md:text-2xl text-gray-700 dark:text-gray-300 leading-relaxed font-medium max-w-3xl mx-auto">
          {displayBody}
        </p>
      </div>
    )}

    <div class="mt-16 flex justify-center items-center gap-6">
      <div class="h-px w-20 bg-gradient-to-r from-transparent to-accent/30 dark:to-accent/50"></div>
      <div class="relative">
        <div class="w-3 h-3 rounded-full bg-gradient-to-br from-accent to-accent-dark animate-pulse"></div>
        <div class="absolute inset-0 w-3 h-3 rounded-full bg-accent animate-ping opacity-30"></div>
      </div>
      <div class="h-px w-20 bg-gradient-to-l from-transparent to-accent/30 dark:to-accent/50"></div>
    </div>
  </div>
</section>
