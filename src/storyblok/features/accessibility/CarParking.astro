---
/**
 * ParkerenAutos Component
 * Uses specialized components from @aaltjesdagen/ui design system
 * - IconBadge: Icon badge with gradient, rotation, hover animation
 * - DecorativeUnderline: Gradient underline bar
 * - ContentCard: Glassmorphism card with backdrop-filter, borders, shadows
 */
import { storyblokEditable } from "@storyblok/astro";
import { renderText } from "@aaltjesdagen/ui/utils";
import type { BereikbaarheidProps, ParkerenAutosBlok } from "./types";
import {
  ContentCard,
  IconBadge,
  DecorativeUnderline,
} from "@aaltjesdagen/ui/components";

interface Props extends BereikbaarheidProps<ParkerenAutosBlok> {}

const { blok } = Astro.props;

// Storyblok field mapping: title (text), text (richtext)
const title = blok.title || "";
const tekst = blok.tekst; // Richtext field

// Render richtext content to HTML
const renderedText = renderText(tekst);
---

<section
  {...storyblokEditable(blok)}
  class="parking-section !bg-transparent relative overflow-hidden"
>
  <div class="section-container content-layer">
    <!-- Narrower centered layout -->
    <div class="max-w-4xl mx-auto">
      {/* ContentCard replaces manual glass card wrapper (lines 66-93) */}
      <ContentCard variant="glass" padding="lg" hoverEffect={true}>
        {/* Using named slot for header improves semantic structure */}
        <div slot="header" class="card-header">
          {
            /* IconBadge replaces manual icon badge (lines 102-127) with rotation and hover-rotate animation */
          }
          <IconBadge
            icon="ðŸš—"
            variant="primary"
            size="lg"
            rotation={-3}
            animation="hover-rotate"
          />
          {title && <h2 class="card-title">{title}</h2>}
          {/* DecorativeUnderline replaces manual underline (lines 149-161) */}
          <DecorativeUnderline variant="secondary" width="md" />
        </div>

        {
          renderedText && (
            <div class="card-content prose-base prose-primary">
              <Fragment set:html={renderedText} />
            </div>
          )
        }
      </ContentCard>
    </div>
  </div>
</section>

<style>
  /* === Component-specific styles === */
  /* Layout and positioning only - card/icon/underline styling now handled by base components */

  /* Content layer - sits above background */
  .content-layer {
    z-index: var(--z-content);
  }

  /* Card header - centered layout */
  .card-header {
    text-align: center;
    margin-bottom: 2.5rem;
  }

  .card-title {
    font-size: 2rem;
    font-weight: 800;
    line-height: 1.2;
    color: var(--text-primary);
    letter-spacing: -0.01em;
    margin-bottom: 0.75rem;
  }

  @media (min-width: 768px) {
    .card-title {
      font-size: 2.75rem;
    }
  }

  /* Card content - minimal wrapper styling */
  .card-content {
    position: relative;
  }
</style>

<!--
REFACTORING NOTES:
- Removed duplicate glass card wrapper CSS (~90 lines) - now handled by ContentCard (variant="glass", padding="lg", hoverEffect={true})
- Removed duplicate icon badge CSS (~26 lines) - now handled by IconBadge (variant="primary", size="lg", rotation={-3}, animation="hover-rotate")
- Removed duplicate decorative underline CSS (~13 lines) - now handled by DecorativeUnderline (variant="secondary", width="md")
- Removed ~129 total lines of CSS
- Kept card-header centering (component-specific layout)
- Kept card-title typography (component-specific styling)
- Base components used:
  * IconBadge: Replaces lines 102-131 (icon badge with gradient, rotation, hover animation)
  * DecorativeUnderline: Replaces lines 149-161 (gradient underline bar)
  * ContentCard: Replaces lines 66-93 (glassmorphism card with backdrop-filter, borders, shadows, hover effects)
-->
